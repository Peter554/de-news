version: "3"

tasks:
  fetch_articles:
    cmds:
      - rm -f article-prompt.md ERROR.md
      - bun --bun run createArticlePrompt.ts {{if .DATE}}--date {{.DATE}}{{end}} > article-prompt.md
      - cat article-prompt.md | claude -p --model sonnet
      - test ! -f ERROR.md

  find_missing_dates:
    cmds:
      - bun --bun run findMissingArticleDates.ts

  serve:
    cmds:
      - bun --bun run dev
